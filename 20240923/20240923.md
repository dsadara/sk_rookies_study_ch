## 강사님 정보

soraland@hotmail.net

https://github.com/soraddang

## 네트워크 개요

## 네트워크 주소

## 논리적 주소(3계층 주소)
* 여기서 말하는 계층은 OSI Layer를 말함
* 우리가 주로 사용하는 주소체계는 IP address
    * 네트워크 ID -> 그룹 주소
    * HOST ID -> 그룹에 포함된 일련번호
    * ip address -> 어느 망의 몇번째 주소 를 알수 있다
    * 서브넷 마스크 -> 네트워크 ID와 HOST ID를 구분하는 역할
        * 구분 연산: IP address & Subnet mask -> Network ID

## 내부망과 외부망
이 수업에서 송신자는 A로 지칭하고 수신자를 B로 지칭할 거임

* 송신자는 먼저 수신자가 나와 같은 그룹에 속해있는지 아닌지 확인해야 함
    * network ID가 같으면 같은 그룹에 속해있음
    * 즉 송신자 수신자는 같은 내부망에 존재한다
* 이 수업에서 내부망과 외부망의 정의는 Network ID

## 물리적 주소(2계층주소)

랜카드에 부여되어 있는 주소
* 랜카드에 종류에 따라 물리적 주소가 다름
    * Ethernet Card에서의 물리적 주소는 MAC 주소임

### MAC 주소
* 12자리로 구성
    * 앞에 6자리는 제조회사의 정보
    * 뒤에 6자리는 카드의 일련번호
* 사내망을 관리할 때는 IP 못지않게 MAC Address도 중요
* IP 충돌은 자주 일어나지만 MAC 주소는 고유 주소이므로 충돌이 되지 않는다
    * 충돌나는 이유는 카피된 제품인 경우

### FQDN (7계층 주소)
문자 주소 HOST NAME + Domain Name로 되어 있음  
* www.test.com
    * www는 컴퓨터 이름
    * test.com은 도메인 이름
* 프로토콜을 컴퓨터이름으로 많이 함
    * www ftp smtp 등등
    * 어떤 서비스를 제공하는지 알려주기 위함

## MAC, IP, FQDN Address
셋의 공통점은 그룹주소 + 고유번호의 패턴
* client 입장에서는 서버 주소가 3가지 패턴이 있으므로 편한 걸 사용하면 됨
* 인간의 편의성 순서로 생겨남
    * MAC주소 -> IP 주소 -> FQDN 주소
* FQDN 주소는 통신하는데 필요는 없지만 사용자 편의성을 위함

## DNS
문자 주소(FQDN)를 기반으로 IP Address를 조회해주는 서비스

## ARP
IP Address를 기반으로 Mac Address를 조회하는 서비스
* RARP는 Mac -> Ip

## 포트번호(4계층 주소)

* IP 주소 192.168.1.10
    * 컴퓨터는 1동짜리 APT이고 65535세대가 살고있음
    * 80호 집에 배달을 하고 싶으면 102.168.1.10:80에 주면 됨
    * 여기서 80은 포트번호
* 포트번호는 1~65535 범위에서 설정 가능
    * **Well Known Port** : 1 - 1023 -> 주로 서버에 부착
    * **Registered Port** : 1024 - 49151
    * **Dynamic Port** : 49152 - 65535 -> 주로 클라이언트에 부착
* 프로그램 하나 당 포트번호 1개가 매핑됨
    * 크롬에서 3개의 탭이 있다고 하면 3개의 탭마다 포트번호가 매핑
* C:\Windows\System32\drivers\etc 에 서비스별 포트번호가 있음
    * 이것을 기반으로 포트를 자동으로 매핑해줌
        * 앞에 http:// 라고 적으면 자동으로 http의 포트번호가 붙여짐
* 신규 개발 애플리케이션은 Registered Port를 사용함
    * ICANN이라는 기관에서 관리
    * 카카오톡같이 Public한 경우에 사용하고 사내 메신저를 만들 경우 상관 없음


# 전송모드

* **Unicast**: 1:1
* **Broadcast**: 1:m (불특정다수)
* **Multicast**: 1:n (특정다수)

## Unicast 전송 모드
1대1 전송
* 수신지 주소 뿐 아니라 송신지 주소도 명시해야 함
    * Unicast 전송 모드는 송신자 수신자의 주소가 명확히 적혀있음
* 데이터 전송 시 송신자 수신자의 Port, IP, MAC 주소가 필요
    * MAC 주소는 수신자, 송신자 순서로 되어 있음
* 송신자의 PORT는 Dynamic Port로 운영체제가 결정
* 수신자 IP는 DNS 서비스로 조회할 수 있음 (문자주소 -> Ip)
    * 수신자 MAC은 ARP가

## 브로드캐스트 주소
* 가상 주소
* 시스템 운영 / 어플리케이션 운영 시 사용
* 운영체제를 네트워크에 운용 시 필요
    * 운영체제 설치 시 할당됨
        * BIP : 255.255.255.255 => all
        * BMAC : FF.FF.FF.FF.FF.FF
* DHCP: IP를 할당해주는 프로토콜
    * 수신지의 PORT를 정해줌
* DNS, ARP의 도움을 받지 않고 자동 변환됨
* 수신지의 주소를 보고 브로드캐스트 전송인지 확인
    * 브로드캐스트 수신 IP (BIP): 255.255.255.255
    * 브로드캐스트 수신 MAC (BMAC): FF.FF.FF.FF.FF.FF
        * 수신자는 각각 BIP와 BMAC을 가지고 있는데 송신자가 보낸 것과 일치하는지 확인
* 로컬 브로드캐스트
    * 192.168.1.255 (D) -> 다이렉트 브로드캐스트
        * 망 밖으로 나가는 브로드캐스트
    * 255.255.255.255 (L)
        * 내부에서만 돌아가는 브로드캐스트

## 멀티캐스트 주소
* 가상주소
* 시스템 운영 / 애플리케이션 운영 시 사용
* 운영체제 설치 시 할당 또는 애플리케이션 설치 시 할당
* X.Y.Z.W
    * **X는 224 - 239로 시작 해야함**

## 멀티캐스트 MAC 주소 형식

* **0100.5E** 로 시작하면 멀티캐스트 MAC 주소 형식
    * 0100.5E 224 - 239 는 암기 -> 멀티캐스트 ip, mac 주소
* 멀티캐스트 가상주소를 가지고 있으면 수신을 받을 수 있음
* 멀티캐스트를 사용하는 프로그램을 설치하면 컴퓨터에 멀티캐스트 주소가 추가 됨
    * 보통은 운영체제 설치 시 4개가 설치됨

## ARP

1. ARP request 패킷   
ip가 맞는지 다 물어봐야 하기 때문에 브로드캐스트 방식으로 운영
2. ARP reply 패킷   
ip가 일치하면 mac 주소를 응답해야 함, 물어본 곳에만 보내면 되니 유니캐스트 사용

### ARP 캐시 테이블
ARP reply을 받으면 ARP 캐시에 등록
* 캐시 테이블에 등록해서 request, reply 수고를 덜임   
    * arp -a로 확인
* 정적 -> 수동으로 등록, 
* 동적 -> 내 컴퓨터가 ARP request를 하고 받고 등록해놓은 것

## 게이트웨이
망과 망을 연결시켜주는 중계 장비
* 라우터, 멀티레이어 스위치
* 예시
    * 192.168.1.10 -> 1.0대 망
    * 192.168.5.10 -> 5.0대 망
    * 둘이 연결시키는 게이트웨이
        * 3.0망으로 생성
* 외부와 통신할 때 내부망과 일치하는 게이트웨이를 써야 함
    * 1.0대 망은 1.0대로 

## 계층별 장비
* Switch -> 2계층 장비
    * MAC address
* Router -> 3계층 장비
    * IP address
* Hub -> 1계층 장비
    * 1계층은 주소가 없따!

## Forwarding과 Flooding
포트에서 포트로 데이터를 전송하는 방법
* Forwarding: 하나의 송신지 포트에서 하나의 수신지 포트로 이동
* Flooding: 송신지 포트를 제외한 나머지 포트들에 전송
    * **멀티캐스트 전송이라고 착각하면 안됨!**

## Switch (2계층 장비)
* 경로 데이터베이스
    * 목적지의 출구 번호로 구성됨 
    * Switch의 경로 DB는 MAC Address Table이라고 함
        * 경로DB에서 수신지 MAC주소의 출구번호를 검색
            * 경로 DB에 수신지 MAC 주소가 없으면 Flooding으로 전송
    * MAC Address Table은 가상의 주소를 저장하지 않기 때문에
        * 멀티캐스트를 사용한다 할 수 없음

## Router (3계층 장비)
스위치와 마찬가지로 테이블을 가지고 있음
* Routing Table
    * 수신지 IP를 저장
* 라우터 밑에는 스위치가 있는 경우가 있음
* 라우터에서 수신 IP를 찾지 못하면 Flooding을 하지 않고 패킷을 폐기함
    * 브로드 캐스트, 멀티 캐스트 패킷: 폐기

## Hub (1계층 장비)
* 여기선 더미허브, 스위치 허브 중 더미허브를 말함
* Hub는 물리적 계층으로 주소가 없음
    * 따라서 경로 DB가 없음
    * 그냥 Flooding 방식을 전송함
        * 따라서 오버헤드가 많음

## 필터(제어) 기능
* 허브: 플러딩 방식으로 제어기능이 없음
* 스위치: 포워딩, 플로딩 -> 상황에 따라 제어기능 존재 -> 브로드캐스트 패킷은 필터가 안됨
* 라우터: 포워딩 방식으로만 함 -> 제어기능 있음 -> 못나가게 폐기함

## Cisco Packet Tracer

### ping
* echo-request
* echo-reply
* rtt(round trip times): 질의해서 응답까지 걸리는 시간
* ping을 보내고 일어나는 일
    1. ping 192.168.1.20
    2. arp request
    3. arp reply
        * ARP 캐시 테이블에 정보 등록
    4. echo request
* ping의 reply가 안왔다고 해서 다운되었다고 보면 안 됨
* request timeout
    * 제한시간 이전에 reply가 오지 않음
        * 제한 시간 이후에 reply가 올 수도 있음
* request unreachable
    * 게이트웨이 밖을 못나가는 경우
        * 라우팅 테이블에 목적지가 없음 

## 미디어 트랜스레이션
* 3계층 이상의 장비에서 처리
    * 게이트웨이에서
* 라우터는 브로드캐스트 패킷을 못나가게 함
    * 브로드캐스트 패킷이 있으면 폐기

### 트래픽 흐름 (내부망)
* DNS
* hosts